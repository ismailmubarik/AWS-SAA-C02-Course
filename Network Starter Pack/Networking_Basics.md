### OSI 7-Layer Model
The OSI Model is a conceptual thing and not necessairly how the software is implemented.

![image](https://user-images.githubusercontent.com/33827177/148154704-d38c9228-deff-423c-8827-ef193c275202.png)

Conceptually your phone, laptop, wifi, server (cantril course) has this networking stack.

Media Layer deals with how data is moved from Point A to Point B. The two Points i.e. A & B can be within the same network or the opposite sides of the planet.

The host layers deals with chopping/re-assembling for transaport and formatting the data so that it is understandable by both nodes on the network.

On a High Level we can have FireFox (or any web broswer) surfing a website on a webserver. At the bottom we have physical network cards/interfaces. Conceptually the data from the
web browser flows down to the NIC-1. THe data from From NIC-1 arrives at NIC-2 and then to the webserver. This is a highly abstracted or birds-eye view

### Layer 1 - Physical

![image](https://user-images.githubusercontent.com/33827177/148157898-10804688-32c5-4857-837e-08aaff20a5ad.png)

Layer - 1 device mean it only understand Layer - 1. Layer -3 device means it has functionality for Layer-3.2 & 1.

![image](https://user-images.githubusercontent.com/33827177/148158294-62da5ed6-fa5d-402b-afba-beb8173e155d.png)

A Hub is basically, 4-connector network cable. Layer-1 is basically a broadcast medium and there are no addresses.
It like shouting in a room with 3 other people and not naming any names.

The more devices are present on a layer-1 network the more are chances of layer-1. That's why layer-1 networks don't
scale well.

![image](https://user-images.githubusercontent.com/33827177/148158499-b116655f-aba0-4f2a-bd71-08746af4f6a0.png)

Devices on the layer-1 network needs to have same layer-1 medium and device standards. Meaning a certain type of network
card and cable, or wifi cards

### Layer 2 - Data Link Layer
Layer 2 is critical because everything depends on the device to device communication it provides. Layer 2 works on top of Layer 1 so a functional Layer 1 is required for Layer 2
communications. Layer 2 can run on different types of Layer-1 mediums and provide the same type of capabilities.

A Frame is a format for sending data over Layer-2 network. It is a container of sorts.

A Mac Address for physical networking is not software assigned rather it is a **unique** address attached to a physical device.

A layer-2 frame is given to Layer-1 i.e. the physical medium which transmits it on the physical medium. Layer-1 doesn't understand the contents of the frame. It just sends the
frame as a sequence of 0s and 1s.

![image](https://user-images.githubusercontent.com/33827177/148160004-2b8afa62-794b-4311-87a1-bfc68693df16.png)

**Frame Parts:**
Preamble & Start Frame Delimiter (SFD) - Their functions is to let the devices know that it is the start of the frame.
Source MAC Address
Destination MAC Address - All Fs for Broadcast
Ether Type (ET) - Commonly used to specify which Layer-3 protocol is putting its data inside the Layer-2 frame (Layer-3 uses Layer-2 frames for device-device communication on a local network).
PayLoad- Data that the frame is sending. The data is provided by layer-3. 
FCS - Frame Check Sequence which is CRC-check to ascertain if data corruption has occured.

The data generated by layer-3 inside the frame is encapsulated by the other frame parts. Often type its an IP packet generated by layer-3 encapsulated inside an Ethernet Frame. The frame deliver the data to a layer-2 destination. The frame is analyzed the data interpreted and then extracted and given to destination layer-3.

**Layer-2 CSMA/CD**

![image](https://user-images.githubusercontent.com/33827177/148160200-db157a3f-5ff1-493a-ba16-fe074f8537d0.png)

A layer-2 sits on Layer-1 and so for Layer-2 to work it needs a functional Layer-1 to work.

COnsider the gaming example, the Game on the left needs to communicate with the Game on the Right. It has the Mac Address of NIC of the game on the right. The frame F1 has both the payload and the destination of the Frame.

![image](https://user-images.githubusercontent.com/33827177/148313394-ae9f1d27-9936-4bb2-90aa-8cfbc8b4a759.png)

Layer-2 can communicate with Layer-1 and sense if anybody else is sending data. This is the job of CSMA.

Even though Layer-2 uses Layer-1 to communicate, that communication is abstracted away so conceptually Layers are communicating directly even though in reality it uses the lower Layer(s). This is true for all layers and below layers. 

![image](https://user-images.githubusercontent.com/33827177/148313539-c737ede2-affa-4000-b89b-924d813c2c23.png)

![image](https://user-images.githubusercontent.com/33827177/148314147-21fd368a-b2f5-4d07-add7-2500913a27d2.png)

![image](https://user-images.githubusercontent.com/33827177/148314219-8a02660e-6aad-447f-9b16-c65379a6e9c3.png)

![image](https://user-images.githubusercontent.com/33827177/148314301-486bb857-cd67-4901-89e7-a2eb7fc23c61.png)

### Layer 3 - Network

Layer-3 requires a functional Layer-2. Using Layer-2 devices can communicate with other devices that are on the same network but not with external networks. On costly solution is to connect the 2 networks using point to point link which is expensive. Another problem is that the 2 networks might use different Layer-2 communication protocol and you simply can't join two Layer-2 networks using different communication protocol.

In comes layer-3 which can span different network protocols.

![image](https://user-images.githubusercontent.com/33827177/148316055-90330283-6de5-45a5-9abd-1d03fb332d3a.png)

Packets are similar to frames. The difference is that with Frames source and destination are on the local network. With packets source and destination can be on different network.

During their journey from one network to another network the packets remain the same. As they move across different Layer-2 networks they are encapsulated in frames. The frame is specific to each network. On each hop the packet is encapsulated in a new Frame and the old one is removed.

![image](https://user-images.githubusercontent.com/33827177/148316990-70cda1ba-31d6-4da3-8b2d-12d7b5c1f415.png)

The Protocol Field in the IPv4 field which contains date provided by a Layer-4 protocol. And it is Layer-4 which stores the protocol that is being used. Examples, are ICMP (Value 1: Pings), UDP (Value 17), TCP (Value 6). And so this field tells the Layer-3 protocol at the destination which protocol to pass the data into. 

Time To Live (IPV4) OR Hop Limit (IPv6): Maximum Allowed Before it is discarded. So that the packet is not looping around forever.

**IP Addressing (v4) - IPv4**
IF the Network part of two IP addresses match, it means they are on the same IP network. If not, they're on different networks. But to do that you first need to know which part of an address is for the network part and which part is for the host.

![image](https://user-images.githubusercontent.com/33827177/148318589-0d420dee-7f17-47c5-b8c8-857c86590b0a.png)

**DHCP - Dynamic Host Configuration Protocol** automatically assignes unique IPs to nodes

** Subnet Masks** are configured on Layer-3 interfaces along with IP addresses. Also configured on most Network Interfacing is a default gateway. On your home network for examble your wifi router is set as your default gateway. This is an IP addresses to which packets are forwarded when their intended destination is not in the local IP address.  

![image](https://user-images.githubusercontent.com/33827177/148319396-7583bd9e-2a65-4689-b10e-abf2542a7efa.png)

If the network part of the two IPs are the same it means the source and destination is on the same network.

The default route 0.0.0.0 will match the next hop if nothing else does. If a more specific hop matches then that would be selected instead.

Route Tables can be statically populated or they can be dynamically populated using protocols like BGP (Border Gateway Protocol) which allow routers to communicate with each other and interchange networks they know about. 

An important to note is that when the ISP is forwarding the packet to the AWS it does so using the Layer-2 protocol. The packet is wrapped in a frame which has AWS router's Mac address (default gateway) as the destination. But how does the ISP know the Mac address of the AWS router. For that we use Address Resolution Protocol.

THe Address Resolution Protocol (ARP) is used when you have a Layer-3 packet and you want to encapsulate in a Layer-2 Frame. Since Layer-2 uses Mac Addresses for the source and destination addresses. We need to know the Mac Address of the destination or the next hop. We dont know that and this where ARP protocols comes in handy

![image](https://user-images.githubusercontent.com/33827177/148322485-193f608f-87f6-4a26-8297-b935dff65ac0.png)

Its critical to understand that even if two devices are Layer-3 they are still going to use Layer-2 for communication if they are on the same network.

Router are Layer-3 devices so they understand Layer 3,2,1.

![image](https://user-images.githubusercontent.com/33827177/148323883-4ae7eb44-e4df-4004-8c70-10ec48b1550f.png)

Its a router's job to move packets across the internet.It does so by reviewing packets. Checking route tables for the next hop or target addresses. And then adding frames to the packets to allow its passage through the intermediate Layer-2 networks.

![image](https://user-images.githubusercontent.com/33827177/148324423-06ca6f71-1a90-4d02-a7d2-7c271b9339de.png)

